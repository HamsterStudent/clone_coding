

# 변수의 유효범위와 클로저
+
# 자바스크립트
    함수 지향 언어!!
    함수를 동적으로 생성 / 생성한 함수를 다른 함수에 인수로 넘길 수 있음 / 생성된 곳이 아닌 곳에서 함수를 호출할 수 있음.

# 코드 블록
    - 코드 블록{...} 안에서 선언한 변수는 블록 안에서만 사용할 수 있다.
    - 이미 선언된 변수와 동일한 이름을 가진 변수를 별도의 블록 없이 let로 선언하면 에러가 발생한다.
    - if / for / while 등에서 마찬가지로 {...} 안에서 선언한 변수는 오직 블록 안에서만 접근 가능하다 (이러한 특징은 변수의 유효 범위를 블록 범위, 특히 if 분기문 범위로 한정시킬 수 있어서 유용하다)
    ex) if(true){
        let phrase = '안녕하세요';
        alert(phrase);  //안녕하세요
    }
    alert(phrase) // ReferenceError: Phrase is not defined

# 중첩 함수
    - 함수 내부에서 선언한 함수
    ex) function Hi(firstname, lastname){
        function getname(){
            return firstname + " " + lastname;
        }
        alert("Hello," + getname() );
        alert("Bye," + getname() );
    }
    - 중첩 함수는 새로운 객체의 프로퍼티 형태나 중첩 함수 그 자체로 반환될 수 있다.

# 렉시컬 환경
    1) 변수
        - 자바스크립트는 실행 중인 함수 / 코드 블록{...} / 내부 숨김 연관 객체인 렉시컬 환경(Lexical Environment)을 가진다.
        - 렉시컬 환경 객체는 두 부분으로 구성된다.
            1. 환경 레코드(Environment Record) - 모든 지역 변수를 프로퍼티로 저장하고 있는 객체(this와 같은 기타 정보도 여기에 저장됨)
            2. 외부 렉시컬 환경(Outer Lexical Environment)에 대한 참조

        * '변수'는 특수 내부 객체인 환경 레코드의 프로퍼티일 뿐이다.
        * '변수를 가져오거나 변경' = '환경 레코드의 프로퍼티를 가져오거나 변경'

        - 스크립트 전체와 관련된 렉시컬 환경을 전역 렉시컬 환경이라고 함.

        ex)
        (execution start)
        let phrase;
        phrase = "Hello";
        phrase = "Bye";

        1. 스크립트가 시작되면 스크립트 내에서 선언한 변수 전체가 렉시컬 환경에 올라간다.
        2. phrase에 값을 할당하기 전이기 때문에 undefined
        3. phrase에 값이 할당
        4. phrase의 값이 변경

    # 렉시컬 환경은 자바스크립트가 어떻게 동작하는지 설명하는 데 쓰이는 '이론상의 객체'

    2) 함수 선언문
        - 함수 선언문으로 선언한 함수는 일반 변수와는 달리 바로 초기화된다.
        - 함수 선언문으로 선언한 함수는 렉시컬 환경이 만들어지는 즉시 사용이 가능함.

    3) 내부와 외부 렉시컬 환경
        - 함수를 호출해 실행하면 새로운 렉시컬 환경이 자동으로 만들어진다. 이 환경엔 호출 시 넘겨받은 매개변수와 함수의 지역 변수가 저장됨.
        - 코드에서 변수에 접근할 때:
            1. 먼저 내부 렉시컬 환경을 검색 범위로 잡음
            2. 내부 렉시컬 환경에서 원하는 변수를 찾지 못하면
            3. 검색 범위를 내부 렉시컬 환경이 참조하는 외부 렉시컬 환경으로 확장.
            4. 검색 범위가 전역 렉시컬 환경으로 확장될 때까지 반복.
            * 전역에 도달할 때까지 변수를 찾지 못하면 엄격 모드에서는 에러가 발생한다. 비엄격 모드에선 정의되지 않은 변수에 값 할당
    
    4) 함수를 반환하는 함수
        - 모든 함수는 함수가 생성된 곳의 렉시컬 환경을 기억한다.

        ex)
        function makeCounter(){
            let count = 0;
            
            return function(){
                return count++;
            };
        }
        let counter = makeCounter();


    